@tailwind base;
@tailwind components;
@tailwind utilities;

/* NYC Luxury Real Estate Design System - Mobile First */
@layer base {
  :root {
    --background: 250 250 250;
    --foreground: 23 23 23;
    --card: 255 255 255;
    --card-foreground: 23 23 23;
    --popover: 255 255 255;
    --popover-foreground: 23 23 23;
    --primary: 139 105 20;
    --primary-foreground: 255 255 255;
    --secondary: 245 245 245;
    --secondary-foreground: 23 23 23;
    --muted: 245 245 245;
    --muted-foreground: 115 115 115;
    --accent: 201 169 98;
    --accent-foreground: 23 23 23;
    --destructive: 220 38 38;
    --destructive-foreground: 255 255 255;
    --border: 229 229 229;
    --input: 229 229 229;
    --ring: 201 169 98;
    --radius: 0.75rem;
    
    /* Safe area insets for notched devices */
    --safe-area-top: env(safe-area-inset-top, 0px);
    --safe-area-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-left: env(safe-area-inset-left, 0px);
    --safe-area-right: env(safe-area-inset-right, 0px);
  }

  .dark {
    --background: 23 23 23;
    --foreground: 250 250 250;
    --card: 38 38 38;
    --card-foreground: 250 250 250;
    --popover: 38 38 38;
    --popover-foreground: 250 250 250;
    --primary: 201 169 98;
    --primary-foreground: 23 23 23;
    --secondary: 38 38 38;
    --secondary-foreground: 250 250 250;
    --muted: 38 38 38;
    --muted-foreground: 163 163 163;
    --accent: 201 169 98;
    --accent-foreground: 23 23 23;
    --destructive: 127 29 29;
    --destructive-foreground: 255 255 255;
    --border: 64 64 64;
    --input: 64 64 64;
    --ring: 201 169 98;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply scroll-smooth;
    font-feature-settings: 'liga' 1, 'kern' 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%;
    -webkit-overflow-scrolling: touch;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-inter), system-ui, sans-serif;
    overscroll-behavior-y: contain;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-playfair), Georgia, serif;
    @apply font-bold tracking-tight;
  }

  /* Touch optimization */
  button, a, [role="button"] {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  button, [role="button"] {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Prevent iOS zoom on input focus */
  input, textarea, select {
    font-size: 16px;
  }

  @media (min-width: 768px) {
    input, textarea, select {
      font-size: inherit;
    }
  }
}

@layer components {
  /* Card styles */
  .card-luxury {
    @apply bg-white rounded-xl sm:rounded-2xl shadow-card transition-all duration-300;
    @apply border border-surface-100;
  }

  @media (hover: hover) {
    .card-luxury:hover {
      @apply shadow-card-hover -translate-y-1;
    }
  }

  .card-luxury-dark {
    @apply bg-surface-800 rounded-xl sm:rounded-2xl shadow-card transition-all duration-300;
    @apply border border-surface-700;
  }

  /* Gold accents */
  .gold-accent {
    @apply bg-gradient-to-r from-luxury-gold via-luxury-champagne to-luxury-gold;
    background-size: 200% auto;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .gold-border {
    @apply border-2 border-luxury-gold;
    box-shadow: 0 0 20px rgba(201, 169, 98, 0.2);
  }

  /* Touch-friendly buttons (44px minimum) */
  .btn-primary {
    @apply inline-flex items-center justify-center px-5 sm:px-6 py-3;
    @apply min-h-[44px];
    @apply bg-luxury-bronze text-white font-medium rounded-xl;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-luxury-gold focus:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply active:scale-[0.98];
  }

  @media (hover: hover) {
    .btn-primary:hover:not(:disabled) {
      @apply bg-luxury-gold;
    }
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center px-5 sm:px-6 py-3;
    @apply min-h-[44px];
    @apply bg-surface-100 text-surface-900 font-medium rounded-xl;
    @apply border border-surface-200;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-luxury-gold focus:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply active:scale-[0.98] active:bg-surface-200;
  }

  @media (hover: hover) {
    .btn-secondary:hover:not(:disabled) {
      @apply bg-surface-200;
    }
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center px-5 sm:px-6 py-3;
    @apply min-h-[44px];
    @apply text-surface-700 font-medium rounded-xl;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-luxury-gold focus:ring-offset-2;
    @apply active:bg-surface-200;
  }

  @media (hover: hover) {
    .btn-ghost:hover {
      @apply bg-surface-100;
    }
  }

  /* Touch-friendly inputs */
  .input-luxury {
    @apply w-full px-4 py-3 rounded-xl;
    @apply min-h-[44px];
    @apply bg-white border border-surface-200;
    @apply text-surface-900 placeholder:text-surface-400;
    @apply focus:outline-none focus:ring-2 focus:ring-luxury-gold focus:border-transparent;
    @apply transition-all duration-200;
  }

  .input-luxury:focus {
    box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
  }

  /* Property card with touch support */
  .property-card {
    @apply relative overflow-hidden rounded-xl sm:rounded-2xl bg-white;
    @apply shadow-card transition-all duration-500;
  }

  @media (hover: hover) {
    .property-card:hover {
      @apply shadow-luxury -translate-y-2;
    }
  }

  .property-card-image {
    @apply aspect-[4/3] w-full object-cover;
    @apply transition-transform duration-700;
  }

  @media (hover: hover) {
    .property-card:hover .property-card-image {
      @apply scale-105;
    }
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-2.5 sm:px-3 py-1 rounded-full text-xs font-medium;
  }

  .badge-gold { @apply bg-luxury-champagne text-luxury-bronze; }
  .badge-success { @apply bg-emerald-100 text-emerald-800; }
  .badge-warning { @apply bg-amber-100 text-amber-800; }
  .badge-error { @apply bg-red-100 text-red-800; }
  .badge-info { @apply bg-blue-100 text-blue-800; }

  /* Responsive containers */
  .section {
    @apply py-10 sm:py-16 md:py-24;
  }

  .container-narrow {
    @apply max-w-4xl mx-auto px-4 sm:px-6;
  }

  .container-wide {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Navigation */
  .nav-link {
    @apply text-surface-600 transition-colors duration-200 relative;
  }

  .nav-link::after {
    @apply content-[''] absolute left-0 bottom-0 w-full h-0.5;
    @apply bg-luxury-gold scale-x-0 transition-transform duration-200;
    @apply origin-right;
  }

  @media (hover: hover) {
    .nav-link:hover {
      @apply text-surface-900;
    }
    .nav-link:hover::after {
      @apply scale-x-100 origin-left;
    }
  }

  .nav-link-active {
    @apply text-surface-900;
  }

  .nav-link-active::after {
    @apply scale-x-100;
  }

  /* Skeleton loading */
  .skeleton {
    @apply bg-gradient-to-r from-surface-200 via-surface-100 to-surface-200;
    background-size: 1000px 100%;
    @apply animate-shimmer rounded;
  }

  /* Price display */
  .price-display {
    font-variant-numeric: tabular-nums;
    @apply font-display text-2xl sm:text-3xl font-bold text-surface-900;
  }

  /* FARE Act badge */
  .fare-compliant {
    @apply inline-flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg;
    @apply bg-emerald-50 text-emerald-700 text-xs sm:text-sm font-medium;
    @apply border border-emerald-200;
  }

  /* Stats */
  .stat-card {
    @apply bg-gradient-to-br from-white to-surface-50;
    @apply rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-surface-100;
  }

  .stat-value {
    @apply text-2xl sm:text-3xl md:text-4xl font-display font-bold text-surface-900 mb-1;
  }

  .stat-label {
    @apply text-xs sm:text-sm text-surface-500 uppercase tracking-wider;
  }

  /* Mobile sheet */
  .mobile-sheet {
    @apply fixed inset-x-0 bottom-0 z-50;
    @apply bg-white rounded-t-3xl shadow-luxury;
    padding-bottom: max(var(--safe-area-bottom), 1rem);
    animation: slideUp 0.3s ease-out;
  }

  .mobile-sheet-handle {
    @apply w-12 h-1.5 bg-surface-300 rounded-full mx-auto mt-3 mb-2;
  }

  /* Touch list items */
  .list-item-touch {
    @apply flex items-center gap-3 px-4 py-3.5;
    @apply min-h-[44px];
    @apply active:bg-surface-100 transition-colors;
  }

  /* Swipeable container */
  .swipe-container {
    @apply overflow-x-auto snap-x snap-mandatory;
    @apply hide-scrollbar;
    -webkit-overflow-scrolling: touch;
  }

  .swipe-item {
    @apply snap-center flex-shrink-0;
  }

  /* Mobile card */
  .card-mobile {
    @apply bg-white rounded-xl shadow-sm border border-surface-100;
  }
}

@layer utilities {
  .text-balance { text-wrap: balance; }
  .text-pretty { text-wrap: pretty; }

  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .hide-scrollbar::-webkit-scrollbar { display: none; }

  .glass { @apply bg-white/70 backdrop-blur-lg; }
  .glass-dark { @apply bg-surface-900/70 backdrop-blur-lg; }

  .gradient-text {
    @apply bg-gradient-to-r from-luxury-bronze via-luxury-gold to-luxury-bronze;
    @apply bg-clip-text text-transparent;
    background-size: 200% auto;
  }

  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-luxury-gold focus:ring-offset-2;
  }

  /* Safe area utilities */
  .pt-safe { padding-top: var(--safe-area-top); }
  .pb-safe { padding-bottom: var(--safe-area-bottom); }
  .pb-safe-bottom { padding-bottom: max(var(--safe-area-bottom), 0.5rem); }
  .pl-safe { padding-left: var(--safe-area-left); }
  .pr-safe { padding-right: var(--safe-area-right); }

  /* Touch utilities */
  .touch-manipulation { touch-action: manipulation; }
  .touch-none { touch-action: none; }
  .overscroll-none { overscroll-behavior: none; }

  /* Responsive spacing */
  .space-y-mobile { @apply space-y-3 sm:space-y-4; }
  .gap-mobile { @apply gap-3 sm:gap-4; }
  .p-mobile { @apply p-4 sm:p-6; }
  .px-mobile { @apply px-4 sm:px-6; }
  .py-mobile { @apply py-4 sm:py-6; }

  /* Responsive text */
  .text-responsive-xs { @apply text-[10px] sm:text-xs; }
  .text-responsive-sm { @apply text-xs sm:text-sm; }
  .text-responsive-base { @apply text-sm sm:text-base; }
  .text-responsive-lg { @apply text-base sm:text-lg; }
  .text-responsive-xl { @apply text-lg sm:text-xl; }
  .text-responsive-2xl { @apply text-xl sm:text-2xl; }
  .text-responsive-3xl { @apply text-2xl sm:text-3xl md:text-4xl; }

  /* Min touch target */
  .min-touch { @apply min-h-[44px] min-w-[44px]; }
}

/* Scrollbar styling */
@supports (scrollbar-width: thin) {
  html {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--muted-foreground)) transparent;
  }
}

::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgb(var(--muted-foreground)); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: rgb(var(--foreground)); }

/* Hide scrollbar on touch devices */
@media (pointer: coarse) {
  ::-webkit-scrollbar { width: 0; height: 0; }
}

/* Animations */
@keyframes slideUp {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* iOS-specific */
@supports (-webkit-touch-callout: none) {
  input[type="text"], input[type="email"], input[type="password"],
  input[type="tel"], input[type="number"], input[type="search"],
  select, textarea {
    font-size: 16px;
  }
  .sticky { position: -webkit-sticky; position: sticky; }
}
